<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="notice">

	<!-- list -->
	<select id="selectBoard" parameterType="hashmap" resultType="hashmap">
		SELECT IDX, TITLE, HITCNT, CREATE_DATETIME, CREATE_ID
		FROM board;
	</select>
	
	<!-- select one -->
	<select id="detailBoard" parameterType="hashmap" resultType="hashmap">
		SELECT IDX, TITLE, CONTENTS, HITCNT, CREATE_DATETIME, CREATE_ID, UPDATE_DATETIME, UPDATE_ID
		FROM board
		WHERE IDX = #{IDX};
	</select>
	
	<!-- select one -->
	<select id="selectMaxIdx" parameterType="hashmap" resultType="hashmap">
		SELECT MAX(IDX) AS IDX FROM board
	</select>
	
	
	<!-- hit -->
	<update id="updateCount" parameterType="hashmap">
	  UPDATE board SET HITCNT = HITCNT + 1 WHERE IDX = #{IDX};
	</update>
	
   	
	<!-- insert  -->
 	 <insert id="insertBoard" parameterType="hashmap">
        <selectKey keyProperty="IDX" resultType="int"  order="BEFORE">
        	SELECT MAX(IDX) + 1 FROM board
        </selectKey>
        INSERT INTO board
             ( IDX, TITLE, CONTENTS, CREATE_ID, CREATE_DATETIME   
             )
        VALUES
             ( #{IDX}, #{TITLE}, #{CONTENTS}, #{CREATE_ID}, NOW()
             ) 
    </insert>
   	
   	<!-- update -->
   	<update id="updateBoard" parameterType="hashmap">
        UPDATE board SET
            TITLE = #{TITLE}
            , CONTENTS = #{CONTENTS}
            , UPDATE_ID = #{UPDATE_ID}
            , UPDATE_DATETIME = NOW()
        WHERE
            IDX = #{IDX}
    </update>
    

    <!-- delete -->
     <delete id="deleteBoard" parameterType="hashmap">
        DELETE FROM board
        WHERE
            IDX = #{IDX}
     </delete>
   
</mapper>
